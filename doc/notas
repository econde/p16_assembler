Alterações em relação ao PDS16v1
----------------------------------

- mais registos r0-r15
- introdução de stack
- mais jumps condicionais e mais alcance
- sem escalamento automatico no acesso indireto (ld	rd, [rbx, rix])
- diversas modificações nas instruções shift
- little ended
- registo de flags fora do banco de registos
- introdução das instruções mov e cmp


Incompatibilidade com arquitetura ARM/Cortex
--------------------------------------------

- dimensão da palavra 16/32; designação hword/word
- salto para label noutra secção
- carregar endereço de uma label num registo com a instrução adr
- na subtração a flag carry significa borrow
- flag I habilita a 1
- no ARM o r15 não pode ser rm em certas operações aritméticas (ou outras?)
- as instruções aritméticas ou lógicas afetam sempre as flags

Expressões
--------------------

Na altura de gerar código o calculo do valor de uma expressão:
	- Pode ser feito imediatamente se depender de valores numéricos ou da diferença ou comparação de labels da mesma secção.
	- Pode resultar da adição de uma constante com o valor de uma label não definida - pode ser calculado em fase de relocação.
	- Pode depender de operações inválidas sobre labels.

- Símbolo não definido numa expressão absoluta
- Operação diferente de adição de valor absoluto com label
- Carregamento de endereços em registos


Valor absoluto - que pode ser calculado imediatamente, que só depende de constantes.
	- valores numéricos
	- operações entre valores numéricos
	- diferença ou comparação de labels na mesma secção

	
validate_constant - validar expressão que pode ser usada como constante
 - não pode conter operandos indefinidos
 
validate_address - validar expressão que pode ser usado como endereço
 - pode conter apenas um valor indefinido numa operação que envolva apenas adições


Casos em aberto ou que precisam de atenção
------------------------------------------

- Testar simbolos não definidos

- Aceitar as palavras chave como identificadores (como labels; o gas suporta)

- A última linha de código se não tiver mudança de linha dá erro sintático.


Ambiente de desenvolvimento do assemblador
------------------------------------------

 - O CMakeLists.txt é apenas usado pelo CLion o Makefile é produzido à mão.

 - O executável pode ser produzido para Linux:

$ make

   ou para Windows:

$ make WINDOWS=1

 - O programa de instalação no Windows é produzido por Inno Setup Compiler 5.5.9
   sob as definições do ficheiro das_installer.iss



Erros para corrigir
-------------------

Se o ficheiro HEX estiver aberto por outra aplicação não gera nova versão nem assinala erro.

No caso de label repetida assinala o erro na linha seguinte.

Este erro no find_generic.s não é bem assinalado.

	.equ	PERSON_SIZE, (people_0 - peoplexxx)

Coisas chatas
-------------

Não haver instrução cmp com constante
Se uma variável for muito usada é preciso carregar muitas vezes o seu endereço.
Como o endereço tem que estar guardado a uma distância de 128
é preciso guardar muitas vezes o endereço. Não se pode usar a mesma label.
